( function() {
  $( '#results-panel' ).html( "<%= j( render 'extractions/work/results', efp: @extraction_forms_projects.first) %>" ).foundation();

  var bind_record_saving_mechanism;
  bind_record_saving_mechanism = function() {
    var submitForm, timers;
    timers = {};
    submitForm = function(form) {
      return function() {
        return form.submit();
      };
    };
    $('form.edit_record select, form.edit_record input[type="checkbox"], form.edit_record input[type="radio"], form.edit_record input[type="number"]').change(function(e) {
      var $form, formId;
      e.preventDefault();
      $form = $(this).closest('form');
      formId = $form.attr('id');
      $form.addClass('dirty');
      if (formId in timers) {
        clearTimeout(timers[formId]);
      }
      return timers[formId] = setTimeout(submitForm($form), 750);
    });
    $('form.edit_record input, form.edit_record textarea').each(function() {
      var results;
      results = [];
      while ($(this).outerHeight() < this.scrollHeight + parseFloat($(this).css('borderTopWidth')) + parseFloat($(this).css('borderBottomWidth'))) {
        results.push($(this).height($(this).height() + 1));
      }
      return results;
    });
    return $('form.edit_record input, form.edit_record textarea').keyup(function(e) {
      var $form, code, formId, results;
      e.preventDefault();
      code = e.keyCode || e.which;
      if (code === 9 || code === 16 || code === 18 || code === 37 || code === 38 || code === 39 || code === 40 || code === 91) {
        return;
      }
      $form = $(this).closest('form');
      formId = $form.attr('id');
      $form.addClass('dirty');
      if (formId in timers) {
        clearTimeout(timers[formId]);
      }
      timers[formId] = setTimeout(submitForm($form), 750);
      results = [];
      while ($(this).outerHeight() < this.scrollHeight + parseFloat($(this).css('borderTopWidth')) + parseFloat($(this).css('borderBottomWidth'))) {
        results.push($(this).height($(this).height() + 1));
      }
      return results;
    });
  };

  // ---
  // generated by coffee-script 1.9.2

  bind_record_saving_mechanism();

  $( '.change-outcome-link' ).click( function( e ) {
    $( '#results-panel > .table-container' ).html( '<br><br><br><h1>loading..</h1>' )
    e.preventDefault();
  } );

} )();
